"use strict";(self.webpackChunksistema_inventario_cybercorp=self.webpackChunksistema_inventario_cybercorp||[]).push([[226],{226:(Z,g,i)=>{i.r(g),i.d(g,{AlmacenModule:()=>M});var p=i(6895),s=i(9148),n=i(433),m=i(5127),f=i(6308),h=i(7155),t=i(4650),d=i(7827),b=i(9470),v=i(7500);function C(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"tbody",17)(1,"tr",18)(2,"td")(3,"button",19),t.NdJ("click",function(){const l=t.CHM(o).index,u=t.oxw();return t.KtG(u.eliminarDetalleProducto(l))}),t._UZ(4,"i",20),t.qZA()(),t.TgZ(5,"td"),t._UZ(6,"input",21),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"input",22),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"input",23),t.qZA()()()}if(2&e){const o=c.index;t.xp6(1),t.Q6J("formGroupName",o)}}const y=function(){return["/home/dashboard/"]},x=[{path:"",children:[{path:"egreso",component:(()=>{class e{constructor(o,r,a,l,u){this._productoService=o,this.fb=r,this._egresoService=a,this._alertService=l,this._route=u,this.displayedColumns=["id","nombre","cantidad","opciones"],this.listaProductos=[],this.dataSource=new h.by(this.listaProductos),this.accion="activado",this.form=this.fb.group({detalleEgreso:this.fb.array([])})}ngOnInit(){this.listarProducto()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}agregarProducto(o){this.accion="desactivado";let r=this.form.get("detalleEgreso"),a=this.construirDetalleProducto(o);r.push(a)}eliminarDetalleProducto(o){this.form.get("detalleEgreso").removeAt(o)}registrarDetalle(){console.log(this.form.value),this._egresoService.guardarDetalleEgreso(this.form.value).subscribe(o=>{console.log(o),this._alertService.alertSucces("Registro exitoso"),this._route.navigate(["/inventory/producto/"])},o=>this._alertService.alertError("A ocurrido un problema"))}getForm(){return this.form.get("detalleEgreso")}listarProducto(){this._productoService.listarProductos().subscribe(o=>{this.dataSource.data=o.filter(r=>1==r.is_active&&r.stock>0)})}construirDetalleProducto(o){return this.fb.group({cantidad:["",n.kI.required],stock:[o.stock.toString(),n.kI.required],producto:[o.id,[n.kI.required,n.kI.min(0)]]})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.Uy),t.Y36(n.qu),t.Y36(d.Ap),t.Y36(d.ml),t.Y36(s.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-egreso"]],viewQuery:function(o,r){if(1&o&&(t.Gf(m.NW,5),t.Gf(f.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(r.paginator=a.first),t.iGM(a=t.CRH())&&(r.sort=a.first)}},decls:32,vars:5,consts:[[1,"content-wrapper"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"crear"],["type","button","value","Agregar","data-bs-toggle","modal","data-bs-target","#modelId",1,"btn","btn-primary"],[3,"formGroup","ngSubmit"],[1,"card-body"],["id","",1,"table","table-bordered","table-striped"],["formArrayName","detalleEgreso",4,"ngFor","ngForOf"],[1,"col-sm-2"],[1,"d-grid","gap-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-secondary",3,"routerLink"],["formArrayName","detalleEgreso"],[3,"formGroupName"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["type","text","formControlName","producto","readonly","",1,"form-control"],["type","number","formControlName","stock","readonly","",1,"form-control"],["type","number","formControlName","cantidad",1,"form-control"]],template:function(o,r){1&o&&(t._UZ(0,"app-header")(1,"app-sidebar")(2,"br"),t.TgZ(3,"div",0)(4,"section",1)(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),t._UZ(11,"input",8),t.qZA()(),t.TgZ(12,"form",9),t.NdJ("ngSubmit",function(){return r.registrarDetalle()}),t.TgZ(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th"),t._uU(18,"Opciones"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Producto"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Stock"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Unidades"),t.qZA()()(),t.YNc(25,C,11,1,"tbody",12),t.qZA()(),t.TgZ(26,"div",13)(27,"div",14)(28,"button",15),t._uU(29," Registrar "),t.qZA(),t.TgZ(30,"a",16),t._uU(31,"Cancelar"),t.qZA()()()()()()()()()()),2&o&&(t.xp6(12),t.Q6J("formGroup",r.form),t.xp6(13),t.Q6J("ngForOf",r.getForm().controls),t.xp6(3),t.Q6J("disabled",r.form.invalid||0==r.getForm().length),t.xp6(2),t.Q6J("routerLink",t.DdM(4,y)))},dependencies:[p.sg,s.rH,b.G,v.k,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,n.x0,n.CE],styles:[".incorrect[_ngcontent-%COMP%]{border-color:#ff7676;border:2px solid #ff7676}.correct[_ngcontent-%COMP%]{border:2px solid #8fe8e0;border-color:#8fe8e0}.validado[_ngcontent-%COMP%]{background-color:#8fe8e0;border-color:solid #8fe8e0;color:#fff}.invalidado[_ngcontent-%COMP%]{background-color:#ff7676;border-color:solid #ff7676;color:#fff}.acciones[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.btn-crear[_ngcontent-%COMP%]{background-color:#3498c0;border-color:#3498c0;width:5rem;color:#fff}.btn-crear[_ngcontent-%COMP%]:hover{background-color:#3498c0;border-color:#3498c0;color:#fff}.containere[_ngcontent-%COMP%]{transform:translate(+47%,+95%);padding:5px;display:flex;align-items:flex-end;justify-content:right}.buscar[_ngcontent-%COMP%]{outline:none;box-sizing:border-box;height:40px;width:0px;padding:0 20px;color:#000;border-radius:30px;font-size:20px;border:1px solid #5c4ea6;transition:all .7s ease}[_ngcontent-%COMP%]::placeholder{color:gray}.bton[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:50px;height:50px;background:#5c4ea6;line-height:10px;border-radius:60%;text-align:center;cursor:pointer;transition:.5s}.bton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#fff;line-height:50px;transition:all .7s ease}.containere[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%]{width:350px}.containere[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:rotate(-360deg)}.bton[_ngcontent-%COMP%]:hover{background:#5c4ea6}.tab[_ngcontent-%COMP%]{box-shadow:10px 10px 10px #6666;border-radius:1em;padding:10px 50px 50px}"]}),e})()}]}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(x),s.Bz]}),e})();var A=i(1469);let M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,P,A.m,n.UX]}),e})()}}]);